<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenFred.ai</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <img src="logo.png" alt="GenHorror.ai" class="logo-image">
                <nav class="nav-links">
                    
                    <select class="language-select" id="language-select">
                        <option value="en" data-text="English">🇺🇸 English</option>
                        <option value="es" data-text="Español">🇪🇸 Español</option>
                        <option value="de" data-text="Deutsch">🇩🇪 Deutsch</option>
                        <option value="ja" data-text="日本語">🇯🇵 日本語</option>
                        <option value="zh" data-text="中文">🇨🇳 中文</option>
                    </select>
                    
                    <button id="login-btn" class="btn-login" data-translate="登入">登入</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="pricing-hero">
        <div class="container">
            <h1 data-translate="選擇最適合您的方案">選擇最適合您的方案</h1>
            <p data-translate="解鎖 AI 圖片生成的無限可能">解鎖 AI 圖片生成的無限可能</p>
        </div>
    </section>

    <!-- Pricing Plans -->
    <section class="pricing-plans">
        <div class="container">
            <div class="pricing-grid">
                <!-- Free Plan -->
                <div class="pricing-card">
                    <div class="plan-name">
                        <h3 data-translate="免費">免費</h3>
                        <p data-translate="適合初次使用者">適合初次使用者</p>
                    </div>
                    <div class="plan-price">
                        <span class="price-amount">0</span>
                        <span class="price-currency">NT$</span>
                        <span class="price-period">/月</span>
                    </div>
                    <div class="plan-features">
                        <ul>
                            <li data-translate="每日 2 張圖片">每日 2 張圖片</li>
                            <li data-translate="512x512 解析度">512x512 解析度</li>
                            <li data-translate="基礎模型">基礎模型</li>
                            <li data-translate="10 種風格">10 種風格</li>
                            <li data-translate="有水印">有水印</li>
                        </ul>
                    </div>
                    <div class="plan-action">
                        <button class="btn-secondary" disabled data-translate="當前方案">當前方案</button>
                    </div>
                </div>

                <!-- Basic Plan -->
                <div class="pricing-card featured">
                    <div class="popular-badge" data-translate="最受歡迎">最受歡迎</div>
                    <div class="plan-name">
                        <h3 data-translate="基本">基本</h3>
                        <p data-translate="適合個人創作者">適合個人創作者</p>
                    </div>
                    <div class="plan-price">
                        <span class="price-amount">99</span>
                        <span class="price-currency">NT$</span>
                        <span class="price-period">/月</span>
                    </div>
                    <div class="plan-features">
                        <ul>
                            <li data-translate="每日 1000 張圖片">每日 1000 張圖片</li>
                            <li data-translate="1024x1024 解析度">1024x1024 解析度</li>
                            <li data-translate="基礎+進階模型">基礎+進階模型</li>
                            <li data-translate="50 種風格">50 種風格</li>
                            <li data-translate="無水印">無水印</li>
                            <li data-translate="10GB 儲存">10GB 儲存</li>
                            <li data-translate="30天歷史">30天歷史</li>
                        </ul>
                    </div>
                    <div class="plan-action">
                        <button class="btn-primary" onclick="subscribePlan('basic')" data-translate="開始使用">開始使用</button>
                    </div>
                </div>

                <!-- Advanced Plan -->
                <div class="pricing-card">
                    <div class="plan-name">
                        <h3 data-translate="進階">進階</h3>
                        <p data-translate="適合專業創作者">適合專業創作者</p>
                    </div>
                    <div class="plan-price">
                        <span class="price-amount">299</span>
                        <span class="price-currency">NT$</span>
                        <span class="price-period">/月</span>
                    </div>
                    <div class="plan-features">
                        <ul>
                            <li data-translate="無限生成">無限生成</li>
                            <li data-translate="2048x2048 解析度">2048x2048 解析度</li>
                            <li data-translate="所有模型">所有模型</li>
                            <li data-translate="100+ 種風格">100+ 種風格</li>
                            <li data-translate="無水印">無水印</li>
                            <li data-translate="100GB 儲存">100GB 儲存</li>
                            <li data-translate="90天歷史">90天歷史</li>
                            <li data-translate="批量生成">批量生成</li>
                            <li data-translate="進階編輯">進階編輯</li>
                        </ul>
                    </div>
                    <div class="plan-action">
                        <button class="btn-primary" onclick="subscribePlan('advanced')" data-translate="開始使用">開始使用</button>
                    </div>
                </div>

                <!-- Pro Plan -->
                <div class="pricing-card">
                    <div class="plan-name">
                        <h3 data-translate="專業">專業</h3>
                        <p data-translate="適合企業用戶">適合企業用戶</p>
                    </div>
                    <div class="plan-price">
                        <span class="price-amount">599</span>
                        <span class="price-currency">NT$</span>
                        <span class="price-period">/月</span>
                    </div>
                    <div class="plan-features">
                        <ul>
                            <li data-translate="無限生成">無限生成</li>
                            <li data-translate="4096x4096 解析度">4096x4096 解析度</li>
                            <li data-translate="所有+獨家模型">所有+獨家模型</li>
                            <li data-translate="無限自訂風格">無限自訂風格</li>
                            <li data-translate="無水印">無水印</li>
                            <li data-translate="1TB 儲存">1TB 儲存</li>
                            <li data-translate="永久歷史">永久歷史</li>
                            <li data-translate="專業編輯工具">專業編輯工具</li>
                            <li data-translate="無限 API">無限 API</li>
                            <li data-translate="24小時支援">24小時支援</li>
                        </ul>
                    </div>
                    <div class="plan-action">
                        <button class="btn-primary" onclick="subscribePlan('pro')" data-translate="開始使用">開始使用</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Feature Comparison -->
    <section class="feature-comparison">
        <div class="container">
            <h2 data-translate="功能比較">功能比較</h2>
            <div class="comparison-wrapper">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th class="feature-column" data-translate="功能">功能</th>
                            <th class="plan-column" data-translate="免費">免費</th>
                            <th class="plan-column" data-translate="基本">基本</th>
                            <th class="plan-column" data-translate="進階">進階</th>
                            <th class="plan-column" data-translate="專業">專業</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="feature-name" data-translate="每日生成數量">每日生成數量</td>
                            <td class="feature-value">2張</td>
                            <td class="feature-value">1000張</td>
                            <td class="feature-value" data-translate="無限">無限</td>
                            <td class="feature-value" data-translate="無限">無限</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="圖片解析度">圖片解析度</td>
                            <td class="feature-value">512×512</td>
                            <td class="feature-value">1024×1024</td>
                            <td class="feature-value">2048×2048</td>
                            <td class="feature-value">4096×4096</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="支援模型">支援模型</td>
                            <td class="feature-value" data-translate="基礎">基礎</td>
                            <td class="feature-value" data-translate="基礎+進階">基礎+進階</td>
                            <td class="feature-value" data-translate="所有">所有</td>
                            <td class="feature-value" data-translate="所有+獨家">所有+獨家</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="風格選擇">風格選擇</td>
                            <td class="feature-value">10種</td>
                            <td class="feature-value">50種</td>
                            <td class="feature-value">100+種</td>
                            <td class="feature-value" data-translate="無限">無限</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="水印">水印</td>
                            <td class="feature-value" data-translate="有">有</td>
                            <td class="feature-value" data-translate="無">無</td>
                            <td class="feature-value" data-translate="無">無</td>
                            <td class="feature-value" data-translate="無">無</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="儲存空間">儲存空間</td>
                            <td class="feature-value">100MB</td>
                            <td class="feature-value">10GB</td>
                            <td class="feature-value">100GB</td>
                            <td class="feature-value">1TB</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="歷史記錄">歷史記錄</td>
                            <td class="feature-value">7天</td>
                            <td class="feature-value">30天</td>
                            <td class="feature-value">90天</td>
                            <td class="feature-value" data-translate="永久">永久</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <h2 data-translate="常見問題">常見問題</h2>
            <div class="faq-grid">
                <div class="faq-item">
                    <h3 data-translate="可以隨時取消訂閱嗎？">可以隨時取消訂閱嗎？</h3>
                    <p data-translate="是的，您可以隨時在帳戶設定中取消訂閱，不會產生額外費用。">是的，您可以隨時在帳戶設定中取消訂閱，不會產生額外費用。</p>
                </div>
                <div class="faq-item">
                    <h3 data-translate="支援哪些付款方式？">支援哪些付款方式？</h3>
                    <p data-translate="我們支援信用卡、金融卡和 PayPal 等主要付款方式。">我們支援信用卡、金融卡和 PayPal 等主要付款方式。</p>
                </div>
                <div class="faq-item">
                    <h3 data-translate="生成的圖片可以商用嗎？">生成的圖片可以商用嗎？</h3>
                    <p data-translate="基本和進階方案支援個人使用，專業方案支援無限商業使用。">基本和進階方案支援個人使用，專業方案支援無限商業使用。</p>
                </div>
                <div class="faq-item">
                    <h3 data-translate="有免費試用期嗎？">有免費試用期嗎？</h3>
                    <p data-translate="所有付費方案都有 7 天免費試用期，無需信用卡即可開始。">所有付費方案都有 7 天免費試用期，無需信用卡即可開始。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 data-translate="GenHorror.ai">GenHorror.ai</h3>
                    <p data-translate="AI 驅動的恐怖圖片生成器">AI 驅動的恐怖圖片生成器</p>
                </div>
                <div class="footer-section">
                    <h4 data-translate="產品">產品</h4>
                    <ul>
                        <li><a href="#" data-translate="圖片生成">圖片生成</a></li>
                        <li><a href="#" data-translate="風格模板">風格模板</a></li>
                        <li><a href="#" data-translate="API">API</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-translate="支援">支援</h4>
                    <ul>
                        <li><a href="#" data-translate="幫助中心">幫助中心</a></li>
                        <li><a href="#" data-translate="聯絡我們">聯絡我們</a></li>
                        <li><a href="#" data-translate="隱私政策">隱私政策</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 GenHorror.ai. <span data-translate="版權所有">版權所有</span></p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="login-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 data-translate="登入">登入</h2>
            
            <!-- Email Login Form -->
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email" data-translate="電子郵件">電子郵件</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label for="login-password" data-translate="密碼">密碼</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="btn-primary" data-translate="登入">登入</button>
            </form>
            
            <!-- Google Login -->
            <div class="google-login-section">
                <button id="google-login-btn" class="google-btn">
                    <i class="fab fa-google"></i>
                    <span data-translate="使用 Google 登入">使用 Google 登入</span>
                </button>
            </div>

            <!-- Switch to Signup -->
            <p class="auth-switch">
                <span data-translate="還沒有帳號？">還沒有帳號？</span>
                <a href="#" id="switch-to-signup" data-translate="立即註冊">立即註冊</a>
            </p>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signup-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 data-translate="註冊">註冊</h2>
            
            <!-- Email Signup Form -->
            <form id="signup-form">
                <div class="form-group">
                    <label for="signup-name" data-translate="姓名">姓名</label>
                    <input type="text" id="signup-name" required>
                </div>
                <div class="form-group">
                    <label for="signup-email" data-translate="電子郵件">電子郵件</label>
                    <input type="email" id="signup-email" required>
                </div>
                <div class="form-group">
                    <label for="signup-password" data-translate="密碼">密碼</label>
                    <input type="password" id="signup-password" required>
                </div>
                <div class="form-group">
                    <label for="signup-confirm-password" data-translate="確認密碼">確認密碼</label>
                    <input type="password" id="signup-confirm-password" required>
                </div>
                <button type="submit" class="btn-primary" data-translate="註冊">註冊</button>
            </form>
            
            <!-- Google Signup -->
            <div class="google-login-section">
                <button id="google-signup-btn" class="google-btn">
                    <i class="fab fa-google"></i>
                    <span data-translate="使用 Google 註冊">使用 Google 註冊</span>
                </button>
            </div>

            <!-- Switch to Login -->
            <p class="auth-switch">
                <span data-translate="已有帳號？">已有帳號？</span>
                <a href="#" id="switch-to-login" data-translate="立即登入">立即登入</a>
            </p>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/translations.js"></script>
    <script src="js/script.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-functions.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        // Firebase 配置
        const firebaseConfig = {
            apiKey: "AIzaSyAOHl-sJQYR0yWFaYC3uY7dXWyBDvnUhXY",
            authDomain: "genhorror-60.firebaseapp.com",
            projectId: "genhorror-60",
            storageBucket: "genhorror-60.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdefghijklmnopqrstuvwxyz"
        };
        
        // 初始化 Firebase
        firebase.initializeApp(firebaseConfig);
        const functions = firebase.functions();
        const auth = firebase.auth();

        // Stripe 訂閱功能
        async function subscribePlan(planType) {
            try {
                console.log('開始訂閱方案:', planType);
                
                // 定義方案價格數據
                let priceData;
                switch(planType) {
                    case 'basic':
                        priceData = {
                            name: 'GenHorror.ai 基本方案',
                            description: '每月 NT$99，適合個人創作者',
                            unit_amount: 9900,
                            currency: 'twd'
                        };
                        break;
                    case 'advanced':
                        priceData = {
                            name: 'GenHorror.ai 進階方案',
                            description: '每月 NT$299，適合專業創作者',
                            unit_amount: 29900,
                            currency: 'twd'
                        };
                        break;
                    case 'pro':
                        priceData = {
                            name: 'GenHorror.ai 專業方案',
                            description: '每月 NT$599，適合企業用戶',
                            unit_amount: 59900,
                            currency: 'twd'
                        };
                        break;
                    default:
                        throw new Error('無效的方案類型');
                }

                // 調用 Firebase Function 創建 Stripe Checkout Session
                const createCheckoutSession = functions.httpsCallable('createCheckoutSessionV2');
                const result = await createCheckoutSession({
                    planType: planType,
                    priceData: priceData
                });

                if (result.data && result.data.url) {
                    window.location.href = result.data.url;
                } else {
                    throw new Error('無法獲取付款頁面連結');
                }
            } catch (error) {
                console.error('訂閱錯誤:', error);
                alert('訂閱失敗: ' + error.message);
            }
        }

        // 初始化頁面
        document.addEventListener('DOMContentLoaded', function() {
            console.log('付費頁面初始化完成');
            
            // 調用 script.js 中的認證功能
            if (window.initAuthFeatures) {
                window.initAuthFeatures();
            } else {
                console.error('initAuthFeatures 函數未找到');
            }
        });
    </script>
</body>
</html>