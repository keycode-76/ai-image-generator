<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenFred.ai</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <img src="logo.png" alt="GenHorror.ai" class="logo-image">
                <nav class="nav-links">
                    
                    <select class="language-select" id="language-select">
                        <option value="en" data-text="English">ğŸ‡ºğŸ‡¸ English</option>
                        <option value="es" data-text="EspaÃ±ol">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                        <option value="de" data-text="Deutsch">ğŸ‡©ğŸ‡ª Deutsch</option>
                        <option value="ja" data-text="æ—¥æœ¬èª">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                        <option value="zh" data-text="ä¸­æ–‡">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    </select>
                    
                    <button id="login-btn" class="btn-login" data-translate="ç™»å…¥">ç™»å…¥</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="pricing-hero">
        <div class="container">
            <h1 data-translate="é¸æ“‡æœ€é©åˆæ‚¨çš„æ–¹æ¡ˆ">é¸æ“‡æœ€é©åˆæ‚¨çš„æ–¹æ¡ˆ</h1>
            <p data-translate="è§£é– AI åœ–ç‰‡ç”Ÿæˆçš„ç„¡é™å¯èƒ½">è§£é– AI åœ–ç‰‡ç”Ÿæˆçš„ç„¡é™å¯èƒ½</p>
        </div>
    </section>

    <!-- Pricing Plans -->
    <section class="pricing-plans">
        <div class="container">
            <div class="pricing-grid">
                <!-- Free Plan -->
                <div class="pricing-card">
                    <div class="plan-name">
                        <h3 data-translate="å…è²»">å…è²»</h3>
                        <p data-translate="é©åˆåˆæ¬¡ä½¿ç”¨è€…">é©åˆåˆæ¬¡ä½¿ç”¨è€…</p>
                    </div>
                    <div class="plan-price">
                        <span class="price-amount">0</span>
                        <span class="price-currency">NT$</span>
                        <span class="price-period">/æœˆ</span>
                    </div>
                    <div class="plan-features">
                        <ul>
                            <li data-translate="æ¯æ—¥ 2 å¼µåœ–ç‰‡">æ¯æ—¥ 2 å¼µåœ–ç‰‡</li>
                            <li data-translate="512x512 è§£æåº¦">512x512 è§£æåº¦</li>
                            <li data-translate="åŸºç¤æ¨¡å‹">åŸºç¤æ¨¡å‹</li>
                            <li data-translate="10 ç¨®é¢¨æ ¼">10 ç¨®é¢¨æ ¼</li>
                            <li data-translate="æœ‰æ°´å°">æœ‰æ°´å°</li>
                        </ul>
                    </div>
                    <div class="plan-action">
                        <button class="btn-secondary" disabled data-translate="ç•¶å‰æ–¹æ¡ˆ">ç•¶å‰æ–¹æ¡ˆ</button>
                    </div>
                </div>

                <!-- Basic Plan -->
                <div class="pricing-card featured">
                    <div class="popular-badge" data-translate="æœ€å—æ­¡è¿">æœ€å—æ­¡è¿</div>
                    <div class="plan-name">
                        <h3 data-translate="åŸºæœ¬">åŸºæœ¬</h3>
                        <p data-translate="é©åˆå€‹äººå‰µä½œè€…">é©åˆå€‹äººå‰µä½œè€…</p>
                    </div>
                    <div class="plan-price">
                        <span class="price-amount">99</span>
                        <span class="price-currency">NT$</span>
                        <span class="price-period">/æœˆ</span>
                    </div>
                    <div class="plan-features">
                        <ul>
                            <li data-translate="æ¯æ—¥ 1000 å¼µåœ–ç‰‡">æ¯æ—¥ 1000 å¼µåœ–ç‰‡</li>
                            <li data-translate="1024x1024 è§£æåº¦">1024x1024 è§£æåº¦</li>
                            <li data-translate="åŸºç¤+é€²éšæ¨¡å‹">åŸºç¤+é€²éšæ¨¡å‹</li>
                            <li data-translate="50 ç¨®é¢¨æ ¼">50 ç¨®é¢¨æ ¼</li>
                            <li data-translate="ç„¡æ°´å°">ç„¡æ°´å°</li>
                            <li data-translate="10GB å„²å­˜">10GB å„²å­˜</li>
                            <li data-translate="30å¤©æ­·å²">30å¤©æ­·å²</li>
                        </ul>
                    </div>
                    <div class="plan-action">
                        <button class="btn-primary" onclick="subscribePlan('basic')" data-translate="é–‹å§‹ä½¿ç”¨">é–‹å§‹ä½¿ç”¨</button>
                    </div>
                </div>

                <!-- Advanced Plan -->
                <div class="pricing-card">
                    <div class="plan-name">
                        <h3 data-translate="é€²éš">é€²éš</h3>
                        <p data-translate="é©åˆå°ˆæ¥­å‰µä½œè€…">é©åˆå°ˆæ¥­å‰µä½œè€…</p>
                    </div>
                    <div class="plan-price">
                        <span class="price-amount">299</span>
                        <span class="price-currency">NT$</span>
                        <span class="price-period">/æœˆ</span>
                    </div>
                    <div class="plan-features">
                        <ul>
                            <li data-translate="ç„¡é™ç”Ÿæˆ">ç„¡é™ç”Ÿæˆ</li>
                            <li data-translate="2048x2048 è§£æåº¦">2048x2048 è§£æåº¦</li>
                            <li data-translate="æ‰€æœ‰æ¨¡å‹">æ‰€æœ‰æ¨¡å‹</li>
                            <li data-translate="100+ ç¨®é¢¨æ ¼">100+ ç¨®é¢¨æ ¼</li>
                            <li data-translate="ç„¡æ°´å°">ç„¡æ°´å°</li>
                            <li data-translate="100GB å„²å­˜">100GB å„²å­˜</li>
                            <li data-translate="90å¤©æ­·å²">90å¤©æ­·å²</li>
                            <li data-translate="æ‰¹é‡ç”Ÿæˆ">æ‰¹é‡ç”Ÿæˆ</li>
                            <li data-translate="é€²éšç·¨è¼¯">é€²éšç·¨è¼¯</li>
                        </ul>
                    </div>
                    <div class="plan-action">
                        <button class="btn-primary" onclick="subscribePlan('advanced')" data-translate="é–‹å§‹ä½¿ç”¨">é–‹å§‹ä½¿ç”¨</button>
                    </div>
                </div>

                <!-- Pro Plan -->
                <div class="pricing-card">
                    <div class="plan-name">
                        <h3 data-translate="å°ˆæ¥­">å°ˆæ¥­</h3>
                        <p data-translate="é©åˆä¼æ¥­ç”¨æˆ¶">é©åˆä¼æ¥­ç”¨æˆ¶</p>
                    </div>
                    <div class="plan-price">
                        <span class="price-amount">599</span>
                        <span class="price-currency">NT$</span>
                        <span class="price-period">/æœˆ</span>
                    </div>
                    <div class="plan-features">
                        <ul>
                            <li data-translate="ç„¡é™ç”Ÿæˆ">ç„¡é™ç”Ÿæˆ</li>
                            <li data-translate="4096x4096 è§£æåº¦">4096x4096 è§£æåº¦</li>
                            <li data-translate="æ‰€æœ‰+ç¨å®¶æ¨¡å‹">æ‰€æœ‰+ç¨å®¶æ¨¡å‹</li>
                            <li data-translate="ç„¡é™è‡ªè¨‚é¢¨æ ¼">ç„¡é™è‡ªè¨‚é¢¨æ ¼</li>
                            <li data-translate="ç„¡æ°´å°">ç„¡æ°´å°</li>
                            <li data-translate="1TB å„²å­˜">1TB å„²å­˜</li>
                            <li data-translate="æ°¸ä¹…æ­·å²">æ°¸ä¹…æ­·å²</li>
                            <li data-translate="å°ˆæ¥­ç·¨è¼¯å·¥å…·">å°ˆæ¥­ç·¨è¼¯å·¥å…·</li>
                            <li data-translate="ç„¡é™ API">ç„¡é™ API</li>
                            <li data-translate="24å°æ™‚æ”¯æ´">24å°æ™‚æ”¯æ´</li>
                        </ul>
                    </div>
                    <div class="plan-action">
                        <button class="btn-primary" onclick="subscribePlan('pro')" data-translate="é–‹å§‹ä½¿ç”¨">é–‹å§‹ä½¿ç”¨</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Feature Comparison -->
    <section class="feature-comparison">
        <div class="container">
            <h2 data-translate="åŠŸèƒ½æ¯”è¼ƒ">åŠŸèƒ½æ¯”è¼ƒ</h2>
            <div class="comparison-wrapper">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th class="feature-column" data-translate="åŠŸèƒ½">åŠŸèƒ½</th>
                            <th class="plan-column" data-translate="å…è²»">å…è²»</th>
                            <th class="plan-column" data-translate="åŸºæœ¬">åŸºæœ¬</th>
                            <th class="plan-column" data-translate="é€²éš">é€²éš</th>
                            <th class="plan-column" data-translate="å°ˆæ¥­">å°ˆæ¥­</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="feature-name" data-translate="æ¯æ—¥ç”Ÿæˆæ•¸é‡">æ¯æ—¥ç”Ÿæˆæ•¸é‡</td>
                            <td class="feature-value">2å¼µ</td>
                            <td class="feature-value">1000å¼µ</td>
                            <td class="feature-value" data-translate="ç„¡é™">ç„¡é™</td>
                            <td class="feature-value" data-translate="ç„¡é™">ç„¡é™</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="åœ–ç‰‡è§£æåº¦">åœ–ç‰‡è§£æåº¦</td>
                            <td class="feature-value">512Ã—512</td>
                            <td class="feature-value">1024Ã—1024</td>
                            <td class="feature-value">2048Ã—2048</td>
                            <td class="feature-value">4096Ã—4096</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="æ”¯æ´æ¨¡å‹">æ”¯æ´æ¨¡å‹</td>
                            <td class="feature-value" data-translate="åŸºç¤">åŸºç¤</td>
                            <td class="feature-value" data-translate="åŸºç¤+é€²éš">åŸºç¤+é€²éš</td>
                            <td class="feature-value" data-translate="æ‰€æœ‰">æ‰€æœ‰</td>
                            <td class="feature-value" data-translate="æ‰€æœ‰+ç¨å®¶">æ‰€æœ‰+ç¨å®¶</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="é¢¨æ ¼é¸æ“‡">é¢¨æ ¼é¸æ“‡</td>
                            <td class="feature-value">10ç¨®</td>
                            <td class="feature-value">50ç¨®</td>
                            <td class="feature-value">100+ç¨®</td>
                            <td class="feature-value" data-translate="ç„¡é™">ç„¡é™</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="æ°´å°">æ°´å°</td>
                            <td class="feature-value" data-translate="æœ‰">æœ‰</td>
                            <td class="feature-value" data-translate="ç„¡">ç„¡</td>
                            <td class="feature-value" data-translate="ç„¡">ç„¡</td>
                            <td class="feature-value" data-translate="ç„¡">ç„¡</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="å„²å­˜ç©ºé–“">å„²å­˜ç©ºé–“</td>
                            <td class="feature-value">100MB</td>
                            <td class="feature-value">10GB</td>
                            <td class="feature-value">100GB</td>
                            <td class="feature-value">1TB</td>
                        </tr>
                        <tr>
                            <td class="feature-name" data-translate="æ­·å²è¨˜éŒ„">æ­·å²è¨˜éŒ„</td>
                            <td class="feature-value">7å¤©</td>
                            <td class="feature-value">30å¤©</td>
                            <td class="feature-value">90å¤©</td>
                            <td class="feature-value" data-translate="æ°¸ä¹…">æ°¸ä¹…</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <h2 data-translate="å¸¸è¦‹å•é¡Œ">å¸¸è¦‹å•é¡Œ</h2>
            <div class="faq-grid">
                <div class="faq-item">
                    <h3 data-translate="å¯ä»¥éš¨æ™‚å–æ¶ˆè¨‚é–±å—ï¼Ÿ">å¯ä»¥éš¨æ™‚å–æ¶ˆè¨‚é–±å—ï¼Ÿ</h3>
                    <p data-translate="æ˜¯çš„ï¼Œæ‚¨å¯ä»¥éš¨æ™‚åœ¨å¸³æˆ¶è¨­å®šä¸­å–æ¶ˆè¨‚é–±ï¼Œä¸æœƒç”¢ç”Ÿé¡å¤–è²»ç”¨ã€‚">æ˜¯çš„ï¼Œæ‚¨å¯ä»¥éš¨æ™‚åœ¨å¸³æˆ¶è¨­å®šä¸­å–æ¶ˆè¨‚é–±ï¼Œä¸æœƒç”¢ç”Ÿé¡å¤–è²»ç”¨ã€‚</p>
                </div>
                <div class="faq-item">
                    <h3 data-translate="æ”¯æ´å“ªäº›ä»˜æ¬¾æ–¹å¼ï¼Ÿ">æ”¯æ´å“ªäº›ä»˜æ¬¾æ–¹å¼ï¼Ÿ</h3>
                    <p data-translate="æˆ‘å€‘æ”¯æ´ä¿¡ç”¨å¡ã€é‡‘èå¡å’Œ PayPal ç­‰ä¸»è¦ä»˜æ¬¾æ–¹å¼ã€‚">æˆ‘å€‘æ”¯æ´ä¿¡ç”¨å¡ã€é‡‘èå¡å’Œ PayPal ç­‰ä¸»è¦ä»˜æ¬¾æ–¹å¼ã€‚</p>
                </div>
                <div class="faq-item">
                    <h3 data-translate="ç”Ÿæˆçš„åœ–ç‰‡å¯ä»¥å•†ç”¨å—ï¼Ÿ">ç”Ÿæˆçš„åœ–ç‰‡å¯ä»¥å•†ç”¨å—ï¼Ÿ</h3>
                    <p data-translate="åŸºæœ¬å’Œé€²éšæ–¹æ¡ˆæ”¯æ´å€‹äººä½¿ç”¨ï¼Œå°ˆæ¥­æ–¹æ¡ˆæ”¯æ´ç„¡é™å•†æ¥­ä½¿ç”¨ã€‚">åŸºæœ¬å’Œé€²éšæ–¹æ¡ˆæ”¯æ´å€‹äººä½¿ç”¨ï¼Œå°ˆæ¥­æ–¹æ¡ˆæ”¯æ´ç„¡é™å•†æ¥­ä½¿ç”¨ã€‚</p>
                </div>
                <div class="faq-item">
                    <h3 data-translate="æœ‰å…è²»è©¦ç”¨æœŸå—ï¼Ÿ">æœ‰å…è²»è©¦ç”¨æœŸå—ï¼Ÿ</h3>
                    <p data-translate="æ‰€æœ‰ä»˜è²»æ–¹æ¡ˆéƒ½æœ‰ 7 å¤©å…è²»è©¦ç”¨æœŸï¼Œç„¡éœ€ä¿¡ç”¨å¡å³å¯é–‹å§‹ã€‚">æ‰€æœ‰ä»˜è²»æ–¹æ¡ˆéƒ½æœ‰ 7 å¤©å…è²»è©¦ç”¨æœŸï¼Œç„¡éœ€ä¿¡ç”¨å¡å³å¯é–‹å§‹ã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 data-translate="GenHorror.ai">GenHorror.ai</h3>
                    <p data-translate="AI é©…å‹•çš„ææ€–åœ–ç‰‡ç”Ÿæˆå™¨">AI é©…å‹•çš„ææ€–åœ–ç‰‡ç”Ÿæˆå™¨</p>
                </div>
                <div class="footer-section">
                    <h4 data-translate="ç”¢å“">ç”¢å“</h4>
                    <ul>
                        <li><a href="#" data-translate="åœ–ç‰‡ç”Ÿæˆ">åœ–ç‰‡ç”Ÿæˆ</a></li>
                        <li><a href="#" data-translate="é¢¨æ ¼æ¨¡æ¿">é¢¨æ ¼æ¨¡æ¿</a></li>
                        <li><a href="#" data-translate="API">API</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-translate="æ”¯æ´">æ”¯æ´</h4>
                    <ul>
                        <li><a href="#" data-translate="å¹«åŠ©ä¸­å¿ƒ">å¹«åŠ©ä¸­å¿ƒ</a></li>
                        <li><a href="#" data-translate="è¯çµ¡æˆ‘å€‘">è¯çµ¡æˆ‘å€‘</a></li>
                        <li><a href="#" data-translate="éš±ç§æ”¿ç­–">éš±ç§æ”¿ç­–</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 GenHorror.ai. <span data-translate="ç‰ˆæ¬Šæ‰€æœ‰">ç‰ˆæ¬Šæ‰€æœ‰</span></p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="login-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 data-translate="ç™»å…¥">ç™»å…¥</h2>
            
            <!-- Email Login Form -->
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email" data-translate="é›»å­éƒµä»¶">é›»å­éƒµä»¶</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label for="login-password" data-translate="å¯†ç¢¼">å¯†ç¢¼</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="btn-primary" data-translate="ç™»å…¥">ç™»å…¥</button>
            </form>
            
            <!-- Google Login -->
            <div class="google-login-section">
                <button id="google-login-btn" class="google-btn">
                    <i class="fab fa-google"></i>
                    <span data-translate="ä½¿ç”¨ Google ç™»å…¥">ä½¿ç”¨ Google ç™»å…¥</span>
                </button>
            </div>

            <!-- Switch to Signup -->
            <p class="auth-switch">
                <span data-translate="é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ">é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ</span>
                <a href="#" id="switch-to-signup" data-translate="ç«‹å³è¨»å†Š">ç«‹å³è¨»å†Š</a>
            </p>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signup-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 data-translate="è¨»å†Š">è¨»å†Š</h2>
            
            <!-- Email Signup Form -->
            <form id="signup-form">
                <div class="form-group">
                    <label for="signup-name" data-translate="å§“å">å§“å</label>
                    <input type="text" id="signup-name" required>
                </div>
                <div class="form-group">
                    <label for="signup-email" data-translate="é›»å­éƒµä»¶">é›»å­éƒµä»¶</label>
                    <input type="email" id="signup-email" required>
                </div>
                <div class="form-group">
                    <label for="signup-password" data-translate="å¯†ç¢¼">å¯†ç¢¼</label>
                    <input type="password" id="signup-password" required>
                </div>
                <div class="form-group">
                    <label for="signup-confirm-password" data-translate="ç¢ºèªå¯†ç¢¼">ç¢ºèªå¯†ç¢¼</label>
                    <input type="password" id="signup-confirm-password" required>
                </div>
                <button type="submit" class="btn-primary" data-translate="è¨»å†Š">è¨»å†Š</button>
            </form>
            
            <!-- Google Signup -->
            <div class="google-login-section">
                <button id="google-signup-btn" class="google-btn">
                    <i class="fab fa-google"></i>
                    <span data-translate="ä½¿ç”¨ Google è¨»å†Š">ä½¿ç”¨ Google è¨»å†Š</span>
                </button>
            </div>

            <!-- Switch to Login -->
            <p class="auth-switch">
                <span data-translate="å·²æœ‰å¸³è™Ÿï¼Ÿ">å·²æœ‰å¸³è™Ÿï¼Ÿ</span>
                <a href="#" id="switch-to-login" data-translate="ç«‹å³ç™»å…¥">ç«‹å³ç™»å…¥</a>
            </p>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/translations.js"></script>
    <script src="js/script.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-functions.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        // Firebase é…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyAOHl-sJQYR0yWFaYC3uY7dXWyBDvnUhXY",
            authDomain: "genhorror-60.firebaseapp.com",
            projectId: "genhorror-60",
            storageBucket: "genhorror-60.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdefghijklmnopqrstuvwxyz"
        };
        
        // åˆå§‹åŒ– Firebase
        firebase.initializeApp(firebaseConfig);
        const functions = firebase.functions();
        const auth = firebase.auth();

        // Stripe è¨‚é–±åŠŸèƒ½
        async function subscribePlan(planType) {
            try {
                console.log('é–‹å§‹è¨‚é–±æ–¹æ¡ˆ:', planType);
                
                // å®šç¾©æ–¹æ¡ˆåƒ¹æ ¼æ•¸æ“š
                let priceData;
                switch(planType) {
                    case 'basic':
                        priceData = {
                            name: 'GenHorror.ai åŸºæœ¬æ–¹æ¡ˆ',
                            description: 'æ¯æœˆ NT$99ï¼Œé©åˆå€‹äººå‰µä½œè€…',
                            unit_amount: 9900,
                            currency: 'twd'
                        };
                        break;
                    case 'advanced':
                        priceData = {
                            name: 'GenHorror.ai é€²éšæ–¹æ¡ˆ',
                            description: 'æ¯æœˆ NT$299ï¼Œé©åˆå°ˆæ¥­å‰µä½œè€…',
                            unit_amount: 29900,
                            currency: 'twd'
                        };
                        break;
                    case 'pro':
                        priceData = {
                            name: 'GenHorror.ai å°ˆæ¥­æ–¹æ¡ˆ',
                            description: 'æ¯æœˆ NT$599ï¼Œé©åˆä¼æ¥­ç”¨æˆ¶',
                            unit_amount: 59900,
                            currency: 'twd'
                        };
                        break;
                    default:
                        throw new Error('ç„¡æ•ˆçš„æ–¹æ¡ˆé¡å‹');
                }

                // èª¿ç”¨ Firebase Function å‰µå»º Stripe Checkout Session
                const createCheckoutSession = functions.httpsCallable('createCheckoutSessionV2');
                const result = await createCheckoutSession({
                    planType: planType,
                    priceData: priceData
                });

                if (result.data && result.data.url) {
                    window.location.href = result.data.url;
                } else {
                    throw new Error('ç„¡æ³•ç²å–ä»˜æ¬¾é é¢é€£çµ');
                }
            } catch (error) {
                console.error('è¨‚é–±éŒ¯èª¤:', error);
                alert('è¨‚é–±å¤±æ•—: ' + error.message);
            }
        }

        // åˆå§‹åŒ–é é¢
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ä»˜è²»é é¢åˆå§‹åŒ–å®Œæˆ');
            
            // èª¿ç”¨ script.js ä¸­çš„èªè­‰åŠŸèƒ½
            if (window.initAuthFeatures) {
                window.initAuthFeatures();
            } else {
                console.error('initAuthFeatures å‡½æ•¸æœªæ‰¾åˆ°');
            }
        });
    </script>
</body>
</html>